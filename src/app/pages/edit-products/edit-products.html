<div class="container py-5">

  <div class="card shadow-lg border-0 admin-card">

    <!-- ================= HEADER ================= -->
    <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">

      <div>
        <h5 class="mb-0 fw-semibold">üõ† Administrar productos</h5>
        <small class="opacity-75">{{ products.length }} productos registrados</small>
      </div>

      <!-- üîé Buscador -->
      <input
        type="text"
        class="form-control form-search w-auto"
        placeholder="Buscar producto..."
        [(ngModel)]="searchTerm"
      />

    </div>


    <!-- ================= TABLE ================= -->
    <div class="table-responsive">

      <table class="table align-middle table-hover mb-0">

        <thead class="table-light">
          <tr>
            <th style="width:70px"></th>
            <th>Producto</th>
            <th>Precio</th>
            <th>Stock</th>
            <th class="text-end">Acciones</th>
          </tr>
        </thead>

        <tbody>

          <tr
            *ngFor="let product of filteredProducts; trackBy: trackById"
            class="row-hover"
          >

            <!-- üñºÔ∏è Imagen -->
            <td>
              <img
                [src]="product.image || 'https://via.placeholder.com/60'"
                class="product-thumb"
              />
            </td>

            <!-- Nombre -->
            <td class="fw-semibold">
              {{ product.name }}
            </td>

            <!-- Precio -->
            <td class="text-success fw-bold">
              ${{ product.price }}
            </td>


            <!-- üì¶ STOCK -->
            <td>

              <span
                class="badge rounded-pill px-3 py-2"
                [ngClass]="{
                  'bg-danger': product.stock === 0,
                  'bg-warning text-dark': product.stock > 0 && product.stock < 5,
                  'bg-success': product.stock >= 5
                }"
              >
                {{ product.stock }}
              </span>

              <div class="btn-group btn-group-sm ms-2">
                <button class="btn btn-outline-success"
                        (click)="addStock(product, 5)">
                  +5
                </button>

                <button class="btn btn-outline-success"
                        (click)="addStock(product, 10)">
                  +10
                </button>
              </div>

            </td>


            <!-- ACCIONES -->
            <td class="text-end">

              <button
                class="btn btn-primary btn-sm rounded-pill me-2"
                (click)="edit(product)"
              >
                ‚úèÔ∏è Editar
              </button>

              <button
                class="btn btn-outline-danger btn-sm rounded-pill"
                (click)="delete(product._id!)"
              >
                üóë Eliminar
              </button>

            </td>

          </tr>

        </tbody>

      </table>

    </div>

  </div>

</div>



<!-- ================= ESTILOS ================= -->
<style>
.admin-card {
  border-radius: 20px;
}

.product-thumb {
  width: 55px;
  height: 55px;
  object-fit: cover;
  border-radius: 10px;
  border: 1px solid #eee;
}

.row-hover:hover {
  background-color: #f8f9fa;
  transition: 0.2s ease;
}

.form-search {
  border-radius: 999px;
  padding: 6px 14px;
}

.badge {
  font-size: 0.8rem;
}
</style>
